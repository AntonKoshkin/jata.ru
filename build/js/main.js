function scrollBtn(){$(window).scrollTop()>=800?$(".up-btn").addClass("up-btn--show"):$(".up-btn").removeClass("up-btn--show")}function init(){map=new ymaps.Map("yaMap",{center:[59.93159322233984,30.375144682556122],zoom:13,controls:["zoomControl"]});var t=ymaps.templateLayoutFactory.createClass("<div class='ya-map__icon ya-map__icon--red'></div>"),e=ymaps.templateLayoutFactory.createClass("<div class='ya-map__icon ya-map__icon--blue'></div>");pointOne=new ymaps.Placemark([59.92022975962769,30.372955999999977],{hintContent:"Точка для оклейки",balloonContent:"СПб, Кременчугская ул., д.8"},{iconLayout:e,iconShape:{type:"Rectangle",coordinates:[[-7,-40],[33,0]]}}),pointTwo=new ymaps.Placemark([59.94484093771931,30.38859016684016],{hintContent:"Главный офис",balloonContent:"СПб, Суворовский проспект, 65б, офис 16"},{iconLayout:t,iconShape:{type:"Rectangle",coordinates:[[-7,-40],[33,0]]}}),map.behaviors.disable("scrollZoom"),map.geoObjects.add(pointOne),map.geoObjects.add(pointTwo)}(function(){var t,e,a,n,o,i,l,r,s,d;e=window.device,t={},window.device=t,n=window.document.documentElement,d=window.navigator.userAgent.toLowerCase(),t.ios=function(){return t.iphone()||t.ipod()||t.ipad()},t.iphone=function(){return!t.windows()&&o("iphone")},t.ipod=function(){return o("ipod")},t.ipad=function(){return o("ipad")},t.android=function(){return!t.windows()&&o("android")},t.androidPhone=function(){return t.android()&&o("mobile")},t.androidTablet=function(){return t.android()&&!o("mobile")},t.blackberry=function(){return o("blackberry")||o("bb10")||o("rim")},t.blackberryPhone=function(){return t.blackberry()&&!o("tablet")},t.blackberryTablet=function(){return t.blackberry()&&o("tablet")},t.windows=function(){return o("windows")},t.windowsPhone=function(){return t.windows()&&o("phone")},t.windowsTablet=function(){return t.windows()&&o("touch")&&!t.windowsPhone()},t.fxos=function(){return(o("(mobile;")||o("(tablet;"))&&o("; rv:")},t.fxosPhone=function(){return t.fxos()&&o("mobile")},t.fxosTablet=function(){return t.fxos()&&o("tablet")},t.meego=function(){return o("meego")},t.cordova=function(){return window.cordova&&"file:"===location.protocol},t.nodeWebkit=function(){return"object"==typeof window.process},t.mobile=function(){return t.androidPhone()||t.iphone()||t.ipod()||t.windowsPhone()||t.blackberryPhone()||t.fxosPhone()||t.meego()},t.tablet=function(){return t.ipad()||t.androidTablet()||t.blackberryTablet()||t.windowsTablet()||t.fxosTablet()},t.desktop=function(){return!t.tablet()&&!t.mobile()},t.television=function(){var t;for(television=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"],t=0;t<television.length;){if(o(television[t]))return!0;t++}return!1},t.portrait=function(){return window.innerHeight/window.innerWidth>1},t.landscape=function(){return window.innerHeight/window.innerWidth<1},t.noConflict=function(){return window.device=e,this},o=function(t){return d.indexOf(t)!==-1},l=function(t){var e;return e=new RegExp(t,"i"),n.className.match(e)},a=function(t){var e=null;l(t)||(e=n.className.replace(/^\s+|\s+$/g,""),n.className=e+" "+t)},s=function(t){l(t)&&(n.className=n.className.replace(" "+t,""))},t.ios()?t.ipad()?a("ios ipad tablet"):t.iphone()?a("ios iphone mobile"):t.ipod()&&a("ios ipod mobile"):t.android()?a(t.androidTablet()?"android tablet":"android mobile"):t.blackberry()?a(t.blackberryTablet()?"blackberry tablet":"blackberry mobile"):t.windows()?a(t.windowsTablet()?"windows tablet":t.windowsPhone()?"windows mobile":"desktop"):t.fxos()?a(t.fxosTablet()?"fxos tablet":"fxos mobile"):t.meego()?a("meego mobile"):t.nodeWebkit()?a("node-webkit"):t.television()?a("television"):t.desktop()&&a("desktop"),t.cordova()&&a("cordova"),i=function(){t.landscape()?(s("portrait"),a("landscape")):(s("landscape"),a("portrait"))},r=Object.prototype.hasOwnProperty.call(window,"onorientationchange")?"orientationchange":"resize",window.addEventListener?window.addEventListener(r,i,!1):window.attachEvent?window.attachEvent(r,i):window[r]=i,i(),"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?module.exports=t:window.device=t}).call(this),function(t,e,a,n){var o=t(e);t.fn.lazyload=function(i){function l(){var e=0;s.each(function(){var a=t(this);if(!d.skip_invisible||a.is(":visible"))if(t.abovethetop(this,d)||t.leftofbegin(this,d));else if(t.belowthefold(this,d)||t.rightoffold(this,d)){if(++e>d.failure_limit)return!1}else a.trigger("appear"),e=0})}var r,s=this,d={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return i&&(n!==i.failurelimit&&(i.failure_limit=i.failurelimit,delete i.failurelimit),n!==i.effectspeed&&(i.effect_speed=i.effectspeed,delete i.effectspeed),t.extend(d,i)),r=d.container===n||d.container===e?o:t(d.container),0===d.event.indexOf("scroll")&&r.bind(d.event,function(){return l()}),this.each(function(){var e=this,a=t(e);e.loaded=!1,a.attr("src")!==n&&a.attr("src")!==!1||a.is("img")&&a.attr("src",d.placeholder),a.one("appear",function(){if(!this.loaded){if(d.appear){var n=s.length;d.appear.call(e,n,d)}t("<img />").bind("load",function(){var n=a.attr("data-"+d.data_attribute);a.hide(),a.is("img")?a.attr("src",n):a.css("background-image","url('"+n+"')"),a[d.effect](d.effect_speed),e.loaded=!0;var o=t.grep(s,function(t){return!t.loaded});if(s=t(o),d.load){var i=s.length;d.load.call(e,i,d)}}).attr("src",a.attr("data-"+d.data_attribute))}}),0!==d.event.indexOf("scroll")&&a.bind(d.event,function(){e.loaded||a.trigger("appear")})}),o.bind("resize",function(){l()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&o.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&s.each(function(){t(this).trigger("appear")})}),t(a).ready(function(){l()}),this},t.belowthefold=function(a,i){var l;return l=i.container===n||i.container===e?(e.innerHeight?e.innerHeight:o.height())+o.scrollTop():t(i.container).offset().top+t(i.container).height(),l<=t(a).offset().top-i.threshold},t.rightoffold=function(a,i){var l;return l=i.container===n||i.container===e?o.width()+o.scrollLeft():t(i.container).offset().left+t(i.container).width(),l<=t(a).offset().left-i.threshold},t.abovethetop=function(a,i){var l;return l=i.container===n||i.container===e?o.scrollTop():t(i.container).offset().top,l>=t(a).offset().top+i.threshold+t(a).height()},t.leftofbegin=function(a,i){var l;return l=i.container===n||i.container===e?o.scrollLeft():t(i.container).offset().left,l>=t(a).offset().left+i.threshold+t(a).width()},t.inviewport=function(e,a){return!(t.rightoffold(e,a)||t.leftofbegin(e,a)||t.belowthefold(e,a)||t.abovethetop(e,a))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document),jQuery(document).ready(function(t){function e(e){t.ajax({url:linkTo.root+":80/api/v1/accounts/becomedriver",type:"POST",data:u}).done(function(){t(".message--success").addClass("message--show"),t(".driver-form").attr("data-page","1"),t("[data-field-type]").each(function(e,a){"form_input"===t(this).attr("data-field-type")?t(this).val("").attr("data-filled","false").attr("data-correct","null"):"form_select"===t(this).attr("data-field-type")&&(t(this).val(t(this).attr("data-placeholder")).attr("data-correct","null").attr("data-val","none"),t(this).attr("data-id")&&t(this).attr("data-id","null"))}),t("[data-content='models']").html("<li class='select__variant' data-val='no-items'>Выберите марку авто</li>"),console.log("form has beed sent")}).fail(function(e){t(".message--fail").addClass("message--show"),e.responseText?console.log("servers answer:\n",e.responseText):console.log("UFO have interrupted our server's work\nwe'l try to fix it")})}function a(t){return t=t.replace(/\D/g,"")}function n(t){t=t.replace(/\D/g,"");var e;if(t.length<=11)switch(t.length){case 0:e="+7 (";break;case 1:e=7!=t[0]?"+7 ("+t[0]:"+7 (";break;case 2:e="+7 ("+t[1];break;case 3:e="+7 ("+t[1]+t[2];break;case 4:e="+7 ("+t[1]+t[2]+t[3];break;case 5:e="+7 ("+t[1]+t[2]+t[3]+") "+t[4];break;case 6:e="+7 ("+t[1]+t[2]+t[3]+") "+t[4]+t[5];break;case 7:e="+7 ("+t[1]+t[2]+t[3]+") "+t[4]+t[5]+t[6];break;case 8:e="+7 ("+t[1]+t[2]+t[3]+") "+t[4]+t[5]+t[6]+"-"+t[7];break;case 9:e="+7 ("+t[1]+t[2]+t[3]+") "+t[4]+t[5]+t[6]+"-"+t[7]+t[8];break;case 10:e="+7 ("+t[1]+t[2]+t[3]+") "+t[4]+t[5]+t[6]+"-"+t[7]+t[8]+"-"+t[9];break;case 11:e="+7 ("+t[1]+t[2]+t[3]+") "+t[4]+t[5]+t[6]+"-"+t[7]+t[8]+"-"+t[9]+t[10]}else e="+7 ("+t[1]+t[2]+t[3]+") "+t[4]+t[5]+t[6]+"-"+t[7]+t[8]+"-"+t[9]+t[10];return e}function o(){t("[data-clock='h']").text(Math.floor(f/3600)),t("[data-clock='m']").text(Math.floor(f%3600/60)),t("[data-clock='s']").text(Math.floor(f%3600%60)),f+=1}function i(t){return t<10&&(t="0"+t.toString()),t}t("body").on("click",".burger",function(e){e.preventDefault(),t(".navigation").toggleClass("navigation--open")}),t("body").on("click",".dot-strip__input",function(e){switch(t(this).attr("id")){case"dotCar":t(".dot-strip__runner").attr("data-pos","one");break;case"dotLorry":t(".dot-strip__runner").attr("data-pos","two");break;case"dotBus":t(".dot-strip__runner").attr("data-pos","three")}t(this).closest(".slider").find(".slide-pack").attr("data-slider-pos",t(this).attr("data-dot-pos"))});for(var l,r={},s={},d=new Date,c=d.getFullYear(),h=0;h<=21;h++)l=+c-h,t("[data-content='years']").append("<li class='select__variant' data-val='"+l+"'>"+l+"</li>");t(".driver-form").length&&t.ajax({url:linkTo.root+":80/api/v1/vehicles/brands/",type:"GET",dataType:"json"}).done(function(e){return console.log("got "+e.length+" car brands"),e.forEach(function(e,a){t("[data-content='brands']").append("<li class='select__variant' data-id='"+e.id+"' data-val='"+e.name+"'>"+e.name+"</li>")}),r=e}).fail(function(){console.log("error on getting car brands")});var u={first_name:"string",last_name:"string",email:"string",phone:"string",how_did_you_know:"unnecessary",car_year:"number",car_state:"string",car_brand:"string",car_model:"string",car_color:"string",avg_mileage_day:"number",avg_mileage_weekend:0,comment:"unnecessary"};t("body").on("click","[data-way]",function(a){a.preventDefault();var n=t(this).closest(".driver-form"),o=n.attr("data-page"),i=t(".driver-form__page[data-page='"+o+"']"),l=+o+1,r=+o-1;if("prev"===t(this).attr("data-way"))switch(r){case 1:n.attr("data-page","1");break;case 2:n.attr("data-page","2")}else{var s=!1,d=t(".driver-form").attr("data-page");switch(d){case"1":i.find("[data-mask]").each(function(e,a){return t(this).length&&"true"!==t(this).attr("data-correct")?(i.find("[data-mask]").each(function(e,a){"true"!==t(this).attr("data-correct")&&t(this).attr("data-correct","false")}),s=!1,!1):(u[t(this).attr("id")]=t(this).val(),void(s=!0))}),u.phone=u.phone.replace(/\D/g,""),u.how_did_you_know=t("#how_did_you_know").val();break;case"2":i.find(".select__input").each(function(e,a){return"none"===t(this).attr("data-val")?(i.find(".select__input").each(function(e,a){"none"===t(this).attr("data-val")&&t(this).attr("data-correct","false")}),s=!1,!1):("car_brand"===t(this).attr("id")||"car_model"===t(this).attr("id")?u[t(this).attr("id")]=t(this).attr("data-id"):u[t(this).attr("id")]=t(this).attr("data-val"),void(s=!0))});break;case"3":i.find("[data-mask]").each(function(e,a){return t(this).length&&"true"!==t(this).attr("data-correct")?(i.find("[data-mask]").each(function(e,a){"true"!==t(this).attr("data-correct")&&t(this).attr("data-correct","false")}),s=!1,!1):(i.find("[data-filled]").each(function(e,a){u[t(this).attr("id")]=t(this).val()}),void(s=!0))});break;default:console.log("wrong page number")}if(s===!0)switch(l){case 2:n.attr("data-page","2"),s=!1;break;case 3:n.attr("data-page","3"),s=!1,u.car_year=+u.car_year;break;case 4:e(t(".driver__form")),s=!1,u.avg_mileage_weekend=+u.avg_mileage_weekend;break;default:console.log("wrong next page number")}}}),t("body").on("blur",".input__input",function(e){""!==t(this).val()?t(this).attr("data-filled","true"):t(this).attr("data-filled","false")}),t("body").on("keyup","[data-mask='tel']",function(){t(this).val(n(t(this).val()))}),t("body").on("keyup","[data-mask='number']",function(){t(this).val(a(t(this).val()))}),t("body").on("blur","[data-mask]",function(e){switch(t(this).attr("data-mask")){case"email":/.+@.+\..+/i.test(t(this).val())?t(this).attr("data-correct","true"):t(this).attr("data-correct","false");break;case"tel":18===t(this).val().length?t(this).attr("data-correct","true"):t(this).attr("data-correct","false");break;case"name":/^[a-zA-Zа-яёА-ЯЁ][a-zA-Zа-яёА-ЯЁ0-9-_\.]{1,20}$/.test(t(this).val())?t(this).attr("data-correct","true"):t(this).attr("data-correct","false");break;case"empty":""!==t(this).val()?t(this).attr("data-correct","true"):t(this).attr("data-correct","empty");break;case"number":""!==t(this).val()?t(this).attr("data-correct","true"):t(this).attr("data-correct","empty")}}),t("body").on("input","[data-mask]",function(e){t(this).attr("data-correct","null")}),t("#map").lazyload({threshold:200,effect:"fadeIn"}),t("body").on("click",".message__bg, .message__close",function(e){e.preventDefault(),t(this).closest(".message").removeClass("message--show")}),t("body").on("mouseenter",".pin",function(e){e.preventDefault(),t(this).removeClass("pin--show").css("z-index","2").siblings().removeClass("pin--show").css("z-index","1")});var f=55555;if(t("html").hasClass("desktop")){var g=new Date;g.setDate(g.getDate());var p=(new Date).getHours(),m=(new Date).getMinutes(),b=(new Date).getSeconds();t("[data-clock='h'").text(p),t("[data-clock='m'").text(m),t("[data-clock='s'").text(b),setInterval(function(){p=(new Date).getHours(),t("[data-clock='h'").text(i(p)),m=(new Date).getMinutes(),t("[data-clock='m'").text(i(m)),b=(new Date).getSeconds(),t("[data-clock='s'").text(i(b))},1e3)}else t("[data-clock='h']").text(Math.floor(f/3600)<10?"0"+Math.floor(f/3600):Math.floor(f/3600)),t("[data-clock='m']").text(Math.floor(f%3600/60)<10?"0"+Math.floor(f%3600/60):Math.floor(f%3600/60)),t("[data-clock='s']").text(Math.floor(f%3600%60)<10?"0"+Math.floor(f%3600%60):Math.floor(f%3600%60)),f+=1,setInterval(o,1e3);t(".questions__item").eq(1).hide(),t("body").on("click",".main-btn--hdiw",function(e){e.preventDefault(),t(this).hasClass("main-btn--active")||(t(this).addClass("main-btn--active").siblings().removeClass("main-btn--active"),t(".questions__item").eq(t(this).index()-2).fadeIn(300).siblings().fadeOut(300),t(".questions__item").find(".question__body").slideUp(300))}),t("body").on("click",".question__header",function(e){e.preventDefault(),t(this).siblings(".question__body").slideToggle(300).closest(".question").siblings(".question").find(".question__body").slideUp(300)}),t("body").on("click",".scroll-btn",function(e){e.preventDefault(),t("html, body").animate({scrollTop:t(this).closest(".section").outerHeight()},700)});var v=0;t(window).scroll(function(e){t(".search").length&&t(window).scrollTop()>=t(".search").offset().top-t(window).height()+t(".search").height()/2&&1!==v&&(t(".search").addClass("search--animate"),v=1)}),t("body").on("click",".select__input",function(e){t(this).closest(".select--open").length?t(this).closest(".select").removeClass("select--open"):(t(".select--open").removeClass("select--open"),t(this).closest(".select").addClass("select--open"))}),t("body").on("click",".select__variant",function(e){"no-items"===t(this).attr("data-val")?t(this).closest(".select").removeClass("select--open"):"car_brand"!==t(this).closest(".select").find("input").attr("id")?t(this).closest(".select__variants").siblings(".select__input").val(t(this).text()).attr("data-val",t(this).attr("data-val")).attr("data-id",t(this).attr("data-id")).attr("data-correct","null").closest(".select").removeClass("select--open"):(t.ajax({url:linkTo.root+":80/api/v1/vehicles/brands/"+t(this).attr("data-id")+"/",type:"GET",dataType:"json"}).done(function(e){return console.log("got "+e.models.length+" models"),t("[data-content='models']").html(""),e.models.length>0?e.models.forEach(function(e,a){t("[data-content='models']").append("<li class='select__variant' data-val='"+e.name+"' data-id='"+e.id+"'>"+e.name+"</li>")}):t("[data-content='models']").append("<li class='select__variant' data-val='no-items'>Марок не найдено</li>"),s=e.models}).fail(function(){console.log("error on getting models")}),t(this).closest(".select__variants").siblings(".select__input").val(t(this).text()).attr("data-val",t(this).attr("data-val")).attr("data-id",t(this).attr("data-id")).attr("data-correct","null").closest(".select").removeClass("select--open"),t("#car_model").val(t("#car_model").attr("data-placeholder")).attr("data-val","none"))}),t("body").on("keyup",".select__input",function(e){if("brands"===t(this).siblings(".select__variants").attr("data-content")){t("[data-content='brands']").html("");t(this).val();r.forEach(function(e,a){e.name.toLowerCase().indexOf(t("[data-content='brands']").prev("input").val().toLowerCase())!==-1&&t("[data-content='brands']").append("<li class='select__variant' data-id='"+e.id+"' data-val='"+e.name+"'>"+e.name+"</li>")}),t("[data-content='brands']").html().length||t("[data-content='brands']").append("<li class='select__variant' data-id='null' data-val='no-items'>Нет совпадений</li>")}else if("models"===t(this).siblings(".select__variants").attr("data-content")){t("[data-content='models']").html("");t(this).val();s.forEach(function(e,a){e.name.toLowerCase().indexOf(t("[data-content='models']").prev("input").val())!==-1&&t("[data-content='models']").append("<li class='select__variant' data-id='"+e.id+"' data-val='"+e.name+"'>"+e.name+"</li>")}),t("[data-content='models']").html().length||t("[data-content='models']").append("<li class='select__variant' data-id='null' data-val='no-items'>Нет совпадений</li>")}}),t("body").on("click","[data-pag-pos]",function(e){e.preventDefault(),t(this).addClass("slide-pack__pag--active").siblings().removeClass("slide-pack__pag--active").closest(".slide-pack__pags").siblings("[data-slider-pos]").attr("data-slider-pos",t(this).attr("data-pag-pos"))});var y=t("#tablet").attr("data-mob-x1"),w=t("#tablet").attr("data-mob-x2"),_=t("#tablet").attr("data-mob-x3"),k=t("#tablet").attr("data-tab-x1"),T=t("#tablet").attr("data-tab-x2"),x=t("#tablet").attr("data-tab-x3");window.devicePixelRatio>=3?t("html").hasClass("mobile")?t("#tablet").attr("data-original",_):t("#tablet").attr("data-original",x):window.devicePixelRatio>=2?t("html").hasClass("mobile")?t("#tablet").attr("data-original",w):t("#tablet").attr("data-original",T):t("html").hasClass("mobile")?t("#tablet").attr("data-original",y):t("#tablet").attr("data-original",k),t("#tablet").lazyload({threshold:200,effect:"fadeIn"}),t("body").on("click",".wd-slider__pag",function(e){e.preventDefault(),t(this).addClass("wd-slider__pag--active").siblings().removeClass("wd-slider__pag--active"),1===t(this).index()?t(this).closest(".wd-slider").addClass("wd-slider--two"):t(this).closest(".wd-slider").removeClass("wd-slider--two")})});var gallery={container:$(".gallery"),allItems:[],itemsToPush:[],isLoading:!1,loader:$(".gallery__loading"),moreBtn:$(".gallery__btn"),isWorking:!0,loadingStart:function(){gallery.isWorking&&(gallery.isLoading=!0,gallery.loader.removeClass("gallery__loading--first").show()),gallery.moreBtn.hide()},loadingEnd:function(t){gallery.isWorking&&(gallery.isLoading=!1,gallery.loader.hide(),t())},fullStop:function(){gallery.isWorking=!1,gallery.loader.hide()},getItems:function(t){gallery.loadingStart(),jQuery(document).ready(function(e){e.ajax({url:linkTo.root+":80/api/v1/gallery",type:"POST",data:{tags:"main"}}).done(function(e){gallery.allItems=e.reverse(),t()}).fail(function(t){console.log("список картинок не получен :("),gallery.loader.text("Сервер жадничает :(")})})},firstPushing:function(t){gallery.allItems.length>=30?gallery.itemsToPush=gallery.allItems.splice(gallery.allItems.length-31,30):gallery.itemsToPush=gallery.allItems;for(var e=0,a=gallery.itemsToPush.length;e<a;e++)gallery.itemsToPush[e]="<div data-url='"+linkTo.root+gallery.itemsToPush[e]+"' class='gallery__item'><img src='"+linkTo.root+gallery.itemsToPush[e]+"' alt><div class='gallery__darkness'></div></div>";gallery.isWorking&&(gallery.itemsToPush=$(gallery.itemsToPush.join("")),gallery.container.masonry({columnWidth:".gallery__item",isAnimated:!0,isInitLayout:!0,isResizable:!0,itemSelector:".gallery__item",percentPosition:!0,singleMode:!0}).append(gallery.itemsToPush),gallery.itemsToPush.hide().imagesLoaded().progress(function(t,e){var a=$(e.img).parents(".gallery__item");a.show(),gallery.container.masonry("appended",a).masonry()}).done(function(){t()}),gallery.itemsToPush=[])},otherPushing:function(t){gallery.allItems.length>=10?gallery.itemsToPush=gallery.allItems.splice(gallery.allItems.length-11,10):(gallery.itemsToPush=gallery.allItems,gallery.allItems=[]);for(var e=0,a=gallery.itemsToPush.length;e<a;e++)gallery.itemsToPush[e]="<div data-url='"+linkTo.root+gallery.itemsToPush[e]+"' class='gallery__item'><img src='"+linkTo.root+gallery.itemsToPush[e]+"' alt><div class='gallery__darkness'></div></div>";gallery.isWorking&&(gallery.loadingStart(),gallery.itemsToPush=$(gallery.itemsToPush.join("")),gallery.container.append(gallery.itemsToPush),gallery.itemsToPush.hide().imagesLoaded().progress(function(t,e){var a=$(e.img).parents(".gallery__item");a.show(),gallery.container.masonry("appended",a).masonry()}).done(function(){t()}),gallery.itemsToPush=[])},scrollLoad:function(){if(gallery.isWorking){var t=$(document).height(),e=$(window).height(),a=$(window).scrollTop(),n=t-e-a;!gallery.isLoading&&n<=150&&(console.log("scrollLoad"),gallery.otherPushing(function(){gallery.loadingEnd(gallery.scrollLoad),0===gallery.allItems.length&&gallery.fullStop()}))}}};if(jQuery(document).ready(function(t){t(".gallery").length&&(gallery.getItems(function(){gallery.firstPushing(function(){gallery.loadingEnd(gallery.scrollLoad)})}),t("body").on("click",".gallery__btn",function(t){t.preventDefault(),gallery.otherPushing(function(){gallery.loadingEnd(gallery.scrollLoad)})}),t(window).scroll(function(t){gallery.scrollLoad()}),t("body").on("click",".gallery__item",function(e){t(".gallery__modal").html("<img src='"+t(this).attr("data-url")+"' alt=''>").closest(".gallery__bg").show()}),t("body").on("click",".gallery__bg",function(e){t(this).hide()}))}),$(".up-btn").length&&($(document).ready(function(){scrollBtn()}),$(window).scroll(function(){scrollBtn()}),$("body").on("click",".up-btn",function(t){$("html, body").stop().animate({scrollTop:0},$(window).scrollTop()/4)})),$("#yaMap").length){ymaps.ready(init);var map,point}